(this["webpackJsonpwiley-test-task"]=this["webpackJsonpwiley-test-task"]||[]).push([[0],[,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(6),i=n.n(c),r=n(3),o=n(4),l=n(2),u="task-list",d="task-id",j="filter-key",b="filter-order",O="task",f="is-open",m=function(){var e=Number(localStorage.getItem(d)),t=Object(a.useState)(e||0),n=Object(r.a)(t,2),s=n[0],c=n[1];return{id:s,nextId:function(){return c((function(e){var t=e+1;return localStorage.setItem(d,String(t)),t}))}}},k=function(){var e=JSON.parse(localStorage.getItem(u)),t=Object(a.useState)(e||{}),n=Object(r.a)(t,2),s=n[0],c=n[1],i=m(),d=i.id,j=i.nextId;return{taskList:s,handleTaskAdd:function(e){j(),c((function(t){var n=Object(l.a)(Object(l.a)({},e),{},{id:d}),a=Object(l.a)(Object(l.a)({},t),{},Object(o.a)({},d,n));return localStorage.setItem(u,JSON.stringify(a)),a}))},handleTaskListChange:function(e){c((function(t){var n=Object(l.a)(Object(l.a)({},t),{},Object(o.a)({},null===e||void 0===e?void 0:e.id,e));return localStorage.setItem(u,JSON.stringify(n)),n}))},handleTaskRemove:function(e){c((function(t){var n=Object(l.a)({},t);return delete n[e.id],localStorage.setItem(u,JSON.stringify(n)),n}))}}},v=function(e){var t=e.taskList,n=sessionStorage.getItem(j),s=sessionStorage.getItem(b),c=Object(a.useState)(n),i=Object(r.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)(s||"asc"),d=Object(r.a)(u,2),O=d[0],f=d[1],m=Object(a.useMemo)((function(){if(!(t&&Object.keys(t).length>0))return[];switch(o){case"id":case"title":return e=t,n=o,a=O,Object.values(e).sort((function(e,t){return e[n]>t[n]?"asc"===a?1:-1:e[n]<t[n]?"asc"===a?-1:1:0})).map((function(e){return e.id}));case"isCompleted":return function(e,t,n){return Object.values(e).sort((function(e,a){var s=!0===e[t]?-1:1,c=!0===a[t]?-1:1;return s>c?"asc"===n?1:-1:s<c?"asc"===n?-1:1:0})).map((function(e){return e.id}))}(t,o,O);default:return Object.keys(t)}var e,n,a}),[t,o,O]),k=Object(a.useCallback)((function(e){"string"!==typeof e&&"number"!==typeof e||(sessionStorage.setItem(j,e),o===e?f((function(e){var t="asc"===e?"desc":"asc";return sessionStorage.setItem(b,t),t})):(sessionStorage.setItem(b,"asc"),l(e),f("asc")))}),[o]);return{filterKey:o,handleKeyChange:k,filterOrder:O,filterIds:m}},h=(n(11),n(0)),g=function(e){var t=e.title,n=e.keyValue,a=(e.order,e.onSelect),s=e.activeKey;return Object(h.jsx)("div",{className:"menu-item".concat(n&&n===s?" menu-item_active":""),onClick:function(){return n&&a(n)},children:Object(h.jsx)("div",{children:t})})},C=(n(13),function(e){var t=e.taskList,n=e.onEdit,s=e.onRemove,c=e.onTaskListChange,i=v({taskList:t}),r=i.filterKey,o=i.handleKeyChange,u=i.filterOrder,d=i.filterIds,j=Object(a.useCallback)((function(e){var t=Object(l.a)(Object(l.a)({},e),{},{isCompleted:!e.isCompleted});c(t)}),[c]);return Object(h.jsxs)("div",{className:"task-list",children:[Object(h.jsxs)("div",{className:"task-menu",children:[Object(h.jsx)(g,{title:"Completed",keyValue:"isCompleted",activeKey:r,activeOrder:u,onSelect:o}),Object(h.jsx)(g,{title:"Id",keyValue:"id",activeKey:r,activeOrder:u,onSelect:o}),Object(h.jsx)(g,{title:"Title",keyValue:"title",activeKey:r,activeOrder:u,onSelect:o}),Object(h.jsx)(g,{title:"Controls"})]}),d.map((function(e){var a=t[e];if(!a)return null;var c=a.title,i=a.isCompleted,r=a.id;return Object(h.jsxs)("div",{className:"task",children:[Object(h.jsx)("div",{className:"task__item",children:Object(h.jsx)("input",{type:"checkbox",checked:i,onClick:function(){return j(a)}})}),Object(h.jsx)("div",{className:"task__item",children:r}),Object(h.jsx)("div",{className:"task__item",children:c}),Object(h.jsxs)("div",{className:"task__item",children:[Object(h.jsx)("button",{className:"task__edit",type:"button",onClick:function(){return n(a)},children:"edit"}),Object(h.jsx)("button",{className:"task__delete",type:"button",onClick:function(){return s(a)},children:"delete"})]})]},r)}))]})}),p=function(){var e="true"===sessionStorage.getItem(f),t=Object(a.useState)(e),n=Object(r.a)(t,2),s=n[0],c=n[1];return{isOpen:s,handleIsOpenSet:function(e){c(e),sessionStorage.setItem(f,String(e))}}},S=(n(14),function(e){var t=e.task,n=e.onChange,a=e.onSubmit,s=e.onCancel;return t?Object(h.jsxs)("form",{className:"task-form",children:[Object(h.jsx)("div",{className:"task-form__item",children:t.id||"New"}),Object(h.jsx)("div",{className:"task-form__item",children:Object(h.jsx)("input",{type:"text",value:t.title,onChange:function(e){return n("title",e.target.value)}})}),Object(h.jsx)("div",{className:"task-form__item",children:Object(h.jsx)("input",{type:"checkbox",checked:t.isCompleted,onClick:function(){return n("isCompleted",!t.isCompleted)}})}),Object(h.jsxs)("div",{className:"task-form__item",children:[Object(h.jsx)("button",{type:"button",onClick:function(){return a(t)},children:"Save"}),Object(h.jsx)("button",{type:"button",onClick:s,children:"Cancel"})]})]}):null}),x=function(e){var t=e.task,n=JSON.parse(sessionStorage.getItem(O)),s=Object(a.useState)(t||n||{}),c=Object(r.a)(s,2),i=c[0],u=c[1];return Object(a.useEffect)((function(){t&&u(t)}),[t]),{task:i,handleTaskChange:function(e,t){return u((function(n){console.log(e,t);var a=Object(l.a)(Object(l.a)({},n),{},Object(o.a)({},e,t));return sessionStorage.setItem(O,JSON.stringify(a)),a}))},handleClearTask:function(){sessionStorage.removeItem(O),u({})}}},y=(n(15),function(e){var t=e.task,n=e.onCreate,s=e.onChange,c=e.onClose,i=x({task:t}),r=i.task,o=i.handleTaskChange,l=i.handleClearTask,u=Object(a.useCallback)((function(e){l(),(null===e||void 0===e?void 0:e.id)?null===s||void 0===s||s(e):null===n||void 0===n||n(e)}),[n,s,l]),d=Object(a.useCallback)((function(e){l(),c()}),[l,c]);return Object(h.jsx)("div",{className:"modal",children:Object(h.jsx)(S,{task:r,onChange:o,onCancel:d,onSubmit:u})})}),N=(n(16),function(){var e=Object(a.useState)({}),t=Object(r.a)(e,2),n=t[0],s=t[1],c=p(),i=c.isOpen,o=c.handleIsOpenSet,l=k(),u=l.taskList,d=l.handleTaskAdd,j=l.handleTaskListChange,b=l.handleTaskRemove;return Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)("button",{className:"app__add",type:"button",onClick:function(){s({}),o(!0)},children:"Add"}),Object(h.jsx)(C,{taskList:u,onRemove:b,onEdit:function(e){s(e),o(!0)},onTaskListChange:j}),i&&Object(h.jsx)(y,{task:n,onChange:function(e){j(e),o(!1)},onCreate:function(e){d(e),o(!1)},onClose:function(){return o(!1)}})]})});n(17);i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.44a15059.chunk.js.map